{"is_source_file": true, "format": "Dart", "description": "This Dart source file defines a singleton API client class 'ApiClient' for a Flutter application. It encapsulates HTTP methods (GET, POST, PUT, DELETE) with JSON encoding/decoding, handles authentication tokens via shared preferences, manages base URL configuration with environment variables, and includes error handling such as automatic logout on 401 Unauthorized responses.", "external_files": ["dart:convert", "package:flutter/foundation.dart", "package:flutter_dotenv/flutter_dotenv.dart", "package:http/http.dart", "package:shared_preferences/shared_preferences.dart"], "external_methods": ["jsonEncode", "jsonDecode", "SharedPreferences.getInstance", "prefs.getString", "prefs.remove", "http.get", "http.post", "http.put", "http.delete", "Uri.parse", "Uri.replace"], "published": ["ApiClient", "ApiException"], "classes": [{"name": "ApiClient", "description": "A singleton class providing HTTP client functionalities with automatic token handling, base URL configuration, and JSON utilities for a Flutter app."}, {"name": "ApiException", "description": "A custom exception class for API errors, carrying message, status code, and response data."}], "methods": [{"name": "ApiClient._internal", "description": "Private constructor for singleton pattern."}, {"name": "ApiClient.factory", "description": "Factory constructor returning the singleton instance."}, {"name": "ApiClient.baseUrl", "description": "Getter that determines the API base URL, preferring environment variable, fallback to localhost or emulator-specific URL."}, {"name": "_headers", "description": "Generates HTTP headers, including Authorization token if available."}, {"name": "_uri", "description": "Constructs a URI with optional query parameters for API requests."}, {"name": "getJson", "description": "Performs a GET request, returns decoded JSON, throws on errors."}, {"name": "postJson", "description": "Performs a POST request with JSON body, returns decoded JSON."}, {"name": "putJson", "description": "Performs a PUT request with JSON body, returns decoded JSON."}, {"name": "delete", "description": "Performs a DELETE request, returns decoded response."}, {"name": "_handleResponse", "description": "Handles HTTP response, manages errors, including auto-logout on 401 Unauthorized."}], "calls": ["jsonEncode", "jsonDecode", "SharedPreferences.getInstance", "prefs.getString", "prefs.remove", "http.get", "http.post", "http.put", "http.delete", "Uri.parse", "Uri.replace"], "search-terms": ["API client", "HTTP requests", "Flutter", "Authorization token", "SharedPreferences", "auto logout", "json handling", "environment base URL"], "state": 2, "file_id": 18, "knowledge_revision": 37, "git_revision": "", "hash": "a252417fb98a3f78e2fd1d358afb4846", "format-version": 4, "code-base-name": "expense_frontend", "filename": "expense_frontend/lib/api/client.dart", "revision_history": [{"37": ""}]}