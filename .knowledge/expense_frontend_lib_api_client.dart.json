{"is_source_file": true, "format": "Dart", "description": "This file implements an API client class for the Budget Tracker Pro application, handling HTTP requests (GET, POST, PUT, DELETE) to interact with a backend server or mock data depending on configuration. It manages request headers, URL construction, and response handling, including error management, and contains logic for switching between mock and real API endpoints.", "external_files": ["package:flutter/foundation.dart", "package:flutter_dotenv/flutter_dotenv.dart", "package:http/http.dart", "package:shared_preferences/shared_preferences.dart", "mock_client.dart"], "external_methods": ["dotenv.env['USE_MOCK_DATA']", "dotenv.env['API_BASE_URL']", "SharedPreferences.getInstance()", "SharedPreferences.getString()", "SharedPreferences.remove()", "http.get()", "http.post()", "http.put()", "http.delete()", "jsonDecode()", "jsonEncode()", "kIsWeb"], "published": ["ApiClient", "ApiException"], "classes": [{"name": "ApiClient", "description": "A singleton class that manages API communications, toggling between mock and real backend, constructing requests, handling responses, and managing authorization tokens."}, {"name": "ApiException", "description": "A custom exception class used to encapsulate API error responses, including message, status code, and additional data."}], "methods": [{"name": "ApiClient._internal", "description": "Private named constructor for singleton pattern initialization."}, {"name": "ApiClient.factory", "description": "Factory constructor returning the singleton instance."}, {"name": "ApiClient._useMock", "description": "Getter that determines whether to use mock data or real HTTP requests based on environment variable."}, {"name": "ApiClient.baseUrl", "description": "Computed property returning the base URL for API requests, varying based on mock mode and environment variables."}, {"name": "ApiClient._headers", "description": "Asynchronous method to generate headers for requests, including authorization token if available."}, {"name": "ApiClient._uri", "description": "Constructs a Uri object from a path and optional query parameters."}, {"name": "ApiClient._mock", "description": "Getter for accessing the MockApiClient instance."}, {"name": "ApiClient.getJson", "description": "Performs an HTTP GET request, either via mock client or real backend, returning decoded JSON."}, {"name": "ApiClient.postJson", "description": "Performs an HTTP POST request with a JSON body, either via mock or real backend."}, {"name": "ApiClient.putJson", "description": "Performs an HTTP PUT request with a JSON body."}, {"name": "ApiClient.delete", "description": "Performs an HTTP DELETE request."}, {"name": "_handleResponse", "description": "Handles HTTP responses, manages errors including unauthorized cases, decodes JSON, and throws ApiException on errors."}], "calls": ["http.get()", "http.post()", "http.put()", "http.delete()", "jsonDecode()", "jsonEncode()", "SharedPreferences.getInstance()", "SharedPreferences.getString()", "SharedPreferences.remove()"], "search-terms": ["ApiClient", "mock mode", "API requests", "authorization token", "response handling", "API URL construction", "exception handling"], "state": 2, "file_id": 18, "knowledge_revision": 66, "git_revision": "ada748a5319f3cc9fdd6a36ad668b9430bc9c70d", "revision_history": [{"37": ""}, {"66": "ada748a5319f3cc9fdd6a36ad668b9430bc9c70d"}], "hash": "ed487e704e52e55f975a7b1d6f57dffb", "format-version": 4, "code-base-name": "expense_frontend", "filename": "expense_frontend/lib/api/client.dart"}